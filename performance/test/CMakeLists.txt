find_package(GTest REQUIRED)
add_executable(slowdown_test slowdown_test.cpp )
add_executable(resource_manager_test resource_manager_test.cpp)
target_include_directories(slowdown_test PUBLIC ${CMAKE_SOURCE_DIR}/performance/include)
target_include_directories(resource_manager_test PUBLIC ${CMAKE_SOURCE_DIR}/performance/include)
target_compile_definitions(slowdown_test PUBLIC USE_SLOWDOWN)
target_link_libraries(slowdown_test GTest::Main kvbc util)
target_link_libraries(resource_manager_test GTest::Main)
if(BUILD_SLOWDOWN)
    TARGET_COMPILE_DEFINITIONS(slowdown_test PUBLIC USE_SLOWDOWN=1)
endif()
add_test(slowdown_test slowdown_test)
add_test(resource_manager_test resource_manager_test)